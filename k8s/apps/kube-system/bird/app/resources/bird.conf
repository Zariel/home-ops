router id from "cilium_host";

protocol direct {
    ipv4 {
        import all;
    };
}

protocol kernel {
    learn all;
    scan time 10;
    graceful restart;
    merge paths on;
    ipv4 {
        import all;
        export none;
    };
}

protocol static {
    disabled;
    ipv4;
}

protocol bgp cilium {
    local port 61790 as 64513;
    neighbor range 10.1.1.0/24 as 64513 internal;

    ipv4 {
        next hop self;
        import all;
        export none;
    };
}

# OSPF to ICX only
# protocol ospf beefchunk {
#     graceful restart
#     ipv4 {
#         export filter {
#             if proto = "cilium" then accept;
#             reject;
#         };
#         import none;  # Don't learn OSPF routes from ICX
#     };
#     area 0 {
#         interface "enp2s0f1np1" {
#             type pointtopoint;
#             cost 10;
#         };
#     };
# }

# Kernel routing table synchronization
protocol kernel {
    ipv4 {
        import none;  # Don't import kernel routes
        export none;  # Don't install routes to kernel (Cilium handles this)
    };
}
