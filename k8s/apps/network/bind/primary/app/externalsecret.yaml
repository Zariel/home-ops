---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: bind
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: bind
    template:
      data:
        externaldns.key: |
          key "externaldns-key" {
            algorithm hmac-sha256;
            secret "{{ .BIND_EXTERNALDNS_SECRET }}";
          };
        externaldns-secret: "{{ .BIND_EXTERNALDNS_SECRET }}"
        rndc.key: |
          key "rndc-key" {
            algorithm hmac-sha256;
            secret "{{ .BIND_RNDC_SECRET }}";
          };
  dataFrom:
    - extract:
        key: bind
